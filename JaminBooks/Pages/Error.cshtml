@page
@model ErrorModel
@{
    ViewData["Title"] = "Error";
    //Set whether or not the user is logged in. This will instruct the Layout page how to render
    ViewData["IsLoggedIn"] = Model.CurrentUser != null;
    //Set the full name of the user logged in
    ViewData["Name"] = Model.CurrentUser == null ? "" : Model.CurrentUser.FirstName + " " + Model.CurrentUser.LastName;
    //Set a count of the number of items in the user's cart
    ViewData["CartCount"] = Model.CurrentUser == null ? 0 : Model.CurrentUser.GetCart().Count;

    //If an admin is logged in, use the Admin layout
    if (Model.CurrentUser != null && Model.CurrentUser.IsAdmin)
    {
        Layout = "~/Pages/Admin/_AdminLayout.cshtml";
    }
    else
    {
        Layout = "~/Pages/_Layout.cshtml";
    }
}

<div class="container text-center" style="margin-top: 5vh">
    <img height="300" src="~/images/codermonkey.png">
    <h2>Oops, Sorry. Something's gone wrong.</h2>
    <h4>Our coder monkeys are furiously smashing their keyboards to fix it.</h4>
    <div class="row mb-5 mt-5">
        <div class="col-4 offset-4">
            <a href="\Books" class="btn btn-dark-red text-white btn-lg btn-block">Continue Shopping</a>
        </div>
    </div>
</div>

@await Html.PartialAsync("_Authentication")